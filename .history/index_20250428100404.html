<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket</title>
</head>

<body>

    <script>
        let heading = document.createElement("h1");
        heading.innerText = "CRICKET 10";
        heading.style.textAlign = "center";

        document.body.appendChild(heading);

        let scoreDetails = document.createElement("div");
        scoreDetails.style.border = "1px solid black";
        scoreDetails.style.width = "80%";
        scoreDetails.style.height = "150px"
        scoreDetails.style.marginLeft = "120px";
        scoreDetails.style.display = "flex";
        scoreDetails.style.justifyContent = "space-around";
        scoreDetails.style.alignItems = "center";
        scoreDetails.style.fontWeight = "bold";
        scoreDetails.style.borderRadius = "10px"


        let teamOne = document.createElement("div");
        teamOne.style.display = "flex";
        teamOne.style.flexDirection = "column";
        teamOne.style.justifyContent = "center";
        teamOne.style.alignItems = "center";

        let teamOneHeading = document.createElement("h2");
        teamOneHeading.innerText = "TEAM 1 SCORE";

        let teamOneSore = document.createElement("span");
        teamOneSore.innerText = 0;
        teamOneSore.style.fontSize = "20px"

        let hitOneBtn = document.createElement("button");
        hitOneBtn.innerText = "HIT 1";
        hitOneBtn.style.marginTop = "15px";
        hitOneBtn.style.backgroundColor = "#40a6d6";
        hitOneBtn.style.border = "none";
        hitOneBtn.style.padding = "6px";
        hitOneBtn.style.color = "white";
        hitOneBtn.style.borderRadius = "3px";
        hitOneBtn.style.cursor = "pointer";

        hitOneBtn.onmouseenter = function () {
            hitOneBtn.style.backgroundColor = "#36728f";
        }

        hitOneBtn.onmouseleave = function () {
            hitOneBtn.style.backgroundColor = "#40a6d6";
        }

        teamOne.appendChild(teamOneHeading);
        teamOne.appendChild(teamOneSore);
        teamOne.appendChild(hitOneBtn);

        scoreDetails.appendChild(teamOne);


        let timerDiv = document.createElement("div");
        timerDiv.style.display = "flex";
        timerDiv.style.flexDirection = "column";
        timerDiv.style.justifyContent = "center";
        timerDiv.style.alignItems = "center";
        let timerLetter = document.createElement("h2");
        timerLetter.innerText = "TIMER";

        let timeSeconds = document.createElement("span");
        timeSeconds.innerText = 0;
        timeSeconds.style.fontSize = "20px"

        timerDiv.appendChild(timerLetter);
        timerDiv.appendChild(timeSeconds);
        scoreDetails.appendChild(timerDiv);


        let teamTwo = document.createElement("div");
        teamTwo.style.display = "flex";
        teamTwo.style.flexDirection = "column";
        teamTwo.style.justifyContent = "center";
        teamTwo.style.alignItems = "center";


        let teamTwoHeading = document.createElement("h2");
        teamTwoHeading.innerText = "TEAM 2 SCORE";

        let teamTwoSore = document.createElement("span");
        teamTwoSore.innerText = 0;
        teamTwoSore.style.fontSize = "20px";

        let hitTwoBtn = document.createElement("button");
        hitTwoBtn.innerText = "HIT 2";
        hitTwoBtn.style.marginTop = "15px";
        hitTwoBtn.style.backgroundColor = "#40a6d6";
        hitTwoBtn.style.border = "none";
        hitTwoBtn.style.padding = "6px";
        hitTwoBtn.style.color = "white";
        hitTwoBtn.style.borderRadius = "3px";
        hitTwoBtn.style.cursor = "pointer";

        hitTwoBtn.onmouseenter = function () {
            hitTwoBtn.style.backgroundColor = "#36728f";
        }

        hitTwoBtn.onmouseleave = function () {
            hitTwoBtn.style.backgroundColor = "#40a6d6";
        }

        teamTwo.appendChild(teamTwoHeading);
        teamTwo.appendChild(teamTwoSore);
        teamTwo.appendChild(hitTwoBtn);

        scoreDetails.appendChild(teamTwo);
        document.body.appendChild(scoreDetails);




        let tableDiv = document.createElement("div");
        tableDiv.style.display = "flex";
        tableDiv.style.flexDirection = "row";
        tableDiv.style.justifyContent = "space-around";
        tableDiv.style.marginTop = "50px"

        function createTeamTable(teamName) {
            let teamTableDiv = document.createElement("div");
            teamTableDiv.style.display = "flex";
            teamTableDiv.style.flexDirection = "column";
            teamTableDiv.style.justifyContent = "center";
            teamTableDiv.style.alignItems = "center";

            let teamScoreBoard = document.createElement("h3");
            teamScoreBoard.innerText = `${teamName} SCORE BOARD`;

            let table = document.createElement("table");
            table.style.borderCollapse = "collapse";

            for (let i = 0; i < 11; i++) {
                let row = document.createElement("tr");

                for (let j = 0; j < 8; j++) {
                    let cell;

                    if (i === 0) {
                        cell = document.createElement("th");

                        if (j === 0) {
                            cell.innerText = teamName;
                            cell.style.width = "90px";
                        } else if (j === 7) {
                            cell.innerText = "Total";
                            cell.style.width = "50px";
                        } else {
                            cell.innerText = `B${j}`;
                            cell.style.width = "40px";
                        }

                        cell.style.backgroundColor = "#f0f0f0";
                    } else {
                        cell = document.createElement("td");
                        cell.innerText = "";
                    }

                    if (j === 0 && i > 0) {
                        cell.innerText = "PLAYER " + i;
                        cell.style.fontWeight = "bold";
                    }

                    cell.style.border = "1px solid black";
                    cell.style.minWidth = "40px";
                    cell.style.height = "30px";
                    cell.style.textAlign = "center";

                    row.appendChild(cell);
                }

                table.appendChild(row);
            }

            teamTableDiv.appendChild(teamScoreBoard);
            teamTableDiv.appendChild(table);

            return teamTableDiv;
        }

        let teamoOne = createTeamTable("TEAM 1");
        let teamtTwo = createTeamTable("TEAM 2");

        tableDiv.appendChild(teamoOne);

        let resultDiv = document.createElement("div");
        resultDiv.style.display = "flex";
        resultDiv.style.flexDirection = "column";
        resultDiv.style.justifyContent = "center";
        resultDiv.style.alignItems = "center";
        resultDiv.style.marginBottom = "170px"

        let resultBtn = document.createElement("button");
        resultBtn.innerText = "GENERATE RESULT";
        resultBtn.style.backgroundColor = "#40a6d6";
        resultBtn.style.color = "white";
        resultBtn.style.border = "none";
        resultBtn.style.padding = "6px";
        resultBtn.style.borderRadius = "3px";
        resultBtn.style.marginBottom = "30px";
        resultBtn.style.cursor = "pointer";

        resultBtn.onmouseenter = function () {
            resultBtn.style.backgroundColor = "#36728f";
        }

        resultBtn.onmouseleave = function () {
            resultBtn.style.backgroundColor = "#40a6d6"
        }

        resultDiv.appendChild(resultBtn);

        let matchResultLetter = document.createElement("h3");
        matchResultLetter.innerText = "MATCH WON BY";

        let matchResult = document.createElement("h3");
        matchResult.innerText = "";

        resultDiv.appendChild(matchResultLetter);
        resultDiv.appendChild(matchResult);



        let manOfTheMatchLetter = document.createElement("h3");
        manOfTheMatchLetter.innerText = "MAN OF THE MATCH";

        let manOfTheMatch = document.createElement("h3");
        manOfTheMatch.innerText = "";

        resultDiv.appendChild(manOfTheMatchLetter);
        resultDiv.appendChild(manOfTheMatch);

        tableDiv.appendChild(resultDiv);
        tableDiv.appendChild(teamtTwo);
        document.body.appendChild(tableDiv);





        let currentPlayer = 1;
        let currentBall = 1;
        let team1Total = 0;
        let team2Total = 0;
        let team1Scores = [];
        let team2Scores = [];

        let team1Table = teamoOne.querySelector("table");
        let team2Table = teamtTwo.querySelector("table");

        hitTwoBtn.disabled = true;
        resultBtn.disabled = true;

        function startTimer(teamNumber) {
            let timeLeft = 60;
            timeSeconds.innerText = timeLeft;

            let interval = setInterval(function () {
                timeLeft--;
                timeSeconds.innerText = timeLeft;


                if (timeLeft === 0 || currentPlayer === 11) {
                    clearInterval(interval);

                    if (teamNumber === 1) {
                        hitOneBtn.disabled = true;
                        hitTwoBtn.disabled = false;
                        currentPlayer = 1;
                        currentBall = 1;
                        startTimer(2);
                    } else {
                        hitTwoBtn.disabled = true;
                        resultBtn.disabled = false;
                    }
                }
            }, 1000);
        }

        function handleHit(team, table, scoreSpan, scores) {
            let score = Math.floor(Math.random() * 7);
            let row = table.rows[currentPlayer];
            if (currentBall <= 6) {
                row.cells[currentBall].innerText = score;
            }

            if (scores[currentPlayer - 1]) {
                scores[currentPlayer - 1] += score;
            } else {
                scores[currentPlayer - 1] = score;
            }

            console.log(scores[currentPlayer - 1]);

            if (score === 0 || currentBall === 6) {
                row.cells[7].innerText = scores[currentPlayer - 1];
                currentPlayer++;
                currentBall = 1;
            } else {
                currentBall++;
            }

            let total = 0;
            for (let i = 0; i < scores.length; i++) {
                total += scores[i];
            }

            scoreSpan.innerText = total;

            if (team === 1) {
                team1Total = total;
            }
            else {
                team2Total = total;
            }
        }

        startTimer(1);

        hitOneBtn.onclick = function () {
            if (currentPlayer <= 10) {
                handleHit(1, team1Table, teamOneSore, team1Scores);
            }
        };

        hitTwoBtn.onclick = function () {
            if (currentPlayer <= 10) {
                handleHit(2, team2Table, teamTwoSore, team2Scores);
            }
        };

        if (team1Total > team2Total) {
                matchResult.innerText = "TEAM 1";
            } else if (team2Total > team1Total) {
                matchResult.innerText = "TEAM 2";
            } else {
                matchResult.innerText = "DRAW";
            }

        resultBtn.onclick = function () {
            

            let max1 = 0;
            let max2 = 0;
            let maxPlayer1 = 0;
            let maxPlayer2 = 0;

            for (let i = 0; i < team1Scores.length; i++) {
                if (team1Scores[i] > max1) {
                    max1 = team1Scores[i];
                    maxPlayer1 = i + 1;
                }
            }

            for (let i = 0; i < team2Scores.length; i++) {
                if (team2Scores[i] > max2) {
                    max2 = team2Scores[i];
                    maxPlayer2 = i + 1;
                }
            }

            if (max1 >= max2) {
                manOfTheMatch.innerText = "PLAYER " + maxPlayer1 + " (TEAM 1) - " + max1 + " runs";
            } else {
                manOfTheMatch.innerText = "PLAYER " + maxPlayer2 + " (TEAM 2) - " + max2 + " runs";
            }
        };



    </script>
</body>

</html>